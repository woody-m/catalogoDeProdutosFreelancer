<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cadastrar Freelancer</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background-color: #f2f2f2; color: #222; padding: 40px 20px; }
  main { max-width: 600px; margin: 0 auto; }
  h1 { font-weight: 700; font-size: 18px; margin-bottom: 10px; }
  hr { border: none; border-top: 1px solid #ccc; margin-bottom: 30px; }
  form { background-color: #fff; padding: 30px 40px; border-radius: 5px; box-shadow: 0 0 6px rgba(0,0,0,0.1); }
  .form-group { margin-bottom: 25px; }
  label { display: block; font-weight: 600; font-size: 14px; margin-bottom: 8px; }
  input { width: 100%; padding: 10px 12px; font-size: 13px; border: 1px solid #ccc; border-radius: 3px; }
  input:focus { border-color: #555; outline: none; }
  button[type="submit"] { display: block; background-color: #222; color: white; font-weight: 700; border: none; border-radius: 3px; font-size: 14px; padding: 12px 30px; cursor: pointer; margin: 30px auto 0 auto; min-width: 120px; transition: background-color 0.3s ease; }
  button[type="submit"]:hover { background-color: #444; }
  .nav-back { margin-top: 20px; text-align: center; }
  .nav-back button { padding: 8px 16px; border-radius: 4px; border: 1px solid #222; background-color: #fff; font-weight: 700; cursor: pointer; }
  .nav-back button:hover { background-color: #222; color: #fff; }
</style>
</head>
<body>
<main>
  <h1>Cadastrar Freelancer</h1>
  <hr />
  <form id="freelancerForm" novalidate>
    <div class="form-group">
      <label for="nome">Nome</label>
      <input type="text" id="nome" name="nome" placeholder="Digite seu nome completo" required />
    </div>
    <div class="form-group">
      <label for="descricao">Serviço</label>
      <input type="text" id="descricao" name="descricao" placeholder="Descreva o serviço que você oferece" required />
    </div>
    <div class="form-group">
      <label for="preco">Preço</label>
      <input type="number" id="preco" name="preco" placeholder="Digite o valor do seu serviço" min="0" step="0.01" required />
    </div>
    <button type="submit">Salvar</button>
  </form>
  <div class="nav-back">
    <button onclick="window.location.href='/'">← Voltar ao Início</button>
    <button onclick="window.location.href='/lista'">→ Ver Lista de Freelancers</button>
  </div>
</main>

<script>
  const API_URL = "http://127.0.0.1:5000/produtos/";

  const form = document.getElementById('freelancerForm');

  form.addEventListener('submit', async event => {
    event.preventDefault();

    const nome = document.getElementById('nome').value;
    const descricao = document.getElementById('descricao').value;
    const preco = parseFloat(document.getElementById('preco').value);

    if (!nome || !descricao || isNaN(preco)) {
      return alert("Por favor, preencha todos os campos corretamente!");
    }

    // Chama a API para criar o freelancer
    const res = await fetch(API_URL, {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({nome, descricao, preco})
    });

    if (res.ok) {
      alert("Freelancer cadastrado com sucesso!");
      form.reset();
      window.location.href = "/lista"; // redireciona para a lista
    } else {
      alert("Erro ao cadastrar freelancer. Tente novamente.");
    }
  });
</script>
</body>
</html>

